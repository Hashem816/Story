# Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù„ØºØ§Øª
# ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©

TRANSLATIONS = {
    # Ø±Ø³Ø§Ø¦Ù„ Ø¹Ø§Ù…Ø©
    "welcome": {
        "ar": "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØ¬Ø±Ù†Ø§! ðŸ›’\nØ§Ø®ØªØ± Ù„ØºØªÙƒ Ø§Ù„Ù…ÙØ¶Ù„Ø©:",
        "en": "Welcome to our store! ðŸ›’\nChoose your preferred language:"
    },
    "language_selected": {
        "ar": "âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
        "en": "âœ… English language selected"
    },
    "main_menu": {
        "ar": "Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
        "en": "Main Menu"
    },
    
    # Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    "btn_store": {
        "ar": "ðŸ›’ Ø§Ù„Ù…ØªØ¬Ø±",
        "en": "ðŸ›’ Store"
    },
    "btn_account": {
        "ar": "ðŸ‘¤ Ø­Ø³Ø§Ø¨ÙŠ",
        "en": "ðŸ‘¤ My Account"
    },
    "btn_orders": {
        "ar": "ðŸ“¦ Ø·Ù„Ø¨Ø§ØªÙŠ",
        "en": "ðŸ“¦ My Orders"
    },
    "btn_balance": {
        "ar": "ðŸ’° Ø´Ø­Ù† Ø±ØµÙŠØ¯",
        "en": "ðŸ’° Add Balance"
    },
    "btn_support": {
        "ar": "â“ Ø§Ù„Ø¯Ø¹Ù…",
        "en": "â“ Support"
    },
    "btn_admin_panel": {
        "ar": "âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",
        "en": "âš™ï¸ Admin Panel"
    },
    
    # Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†
    "admin_panel_title": {
        "ar": "ðŸ›  *Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©*\nØ§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¥Ø¯Ø§Ø±ØªÙ‡:",
        "en": "ðŸ›  *Admin Control Panel*\nSelect the section to manage:"
    },
    "admin_orders": {
        "ar": "ðŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©",
        "en": "ðŸ“¦ Active Orders"
    },
    "admin_products": {
        "ar": "ðŸ›’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
        "en": "ðŸ›’ Manage Products"
    },
    "admin_users": {
        "ar": "ðŸ‘¤ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",
        "en": "ðŸ‘¤ Manage Users"
    },
    "admin_stats": {
        "ar": "ðŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª",
        "en": "ðŸ“Š Statistics"
    },
    "admin_broadcast": {
        "ar": "ðŸ“¢ Ø±Ø³Ø§Ù„Ø© Ø¬Ù…Ø§Ø¹ÙŠØ©",
        "en": "ðŸ“¢ Broadcast Message"
    },
    "admin_coupons": {
        "ar": "ðŸŽŸï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª",
        "en": "ðŸŽŸï¸ Manage Coupons"
    },
    "btn_back": {
        "ar": "ðŸ”™ Ø¹ÙˆØ¯Ø©",
        "en": "ðŸ”™ Back"
    },
    
    # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
    "users_management": {
        "ar": "ðŸ‘¤ *Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø·ÙˆØ±*\n\nØ§Ø®ØªØ± ÙˆØ³ÙŠÙ„Ø© Ø§Ù„Ø¨Ø­Ø« Ø£Ùˆ Ø§Ù„Ø¹Ø±Ø¶:",
        "en": "ðŸ‘¤ *Advanced User Management System*\n\nChoose search or display method:"
    },
    "search_user": {
        "ar": "ðŸ” Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù…",
        "en": "ðŸ” Search User"
    },
    "recent_users": {
        "ar": "ðŸ” Ø¢Ø®Ø± 10 Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",
        "en": "ðŸ” Last 10 Users"
    },
    "all_users": {
        "ar": "ðŸ“‹ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†",
        "en": "ðŸ“‹ All Users"
    },
    "blocked_users": {
        "ar": "ðŸš« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø¸ÙˆØ±ÙŠÙ†",
        "en": "ðŸš« Blocked Users"
    },
    "search_prompt": {
        "ar": "ðŸ” Ø£Ø±Ø³Ù„ Ù…Ø¹Ø±Ù Ø§Ù„ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… (ID) Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ Ø§Ù„Ø§Ø³Ù… Ù„Ù„Ø¨Ø­Ø«:",
        "en": "ðŸ” Send Telegram ID, username, or name to search:"
    },
    "no_results": {
        "ar": "âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ.",
        "en": "âŒ No users found matching your search."
    },
    "search_results": {
        "ar": "ðŸ” Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« ({count}):",
        "en": "ðŸ” Search Results ({count}):"
    },
    
    # ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    "user_details": {
        "ar": "ðŸ‘¤ *ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…*",
        "en": "ðŸ‘¤ *User Details*"
    },
    "user_id": {
        "ar": "ðŸ†” ID",
        "en": "ðŸ†” ID"
    },
    "username": {
        "ar": "ðŸ‘¤ Username",
        "en": "ðŸ‘¤ Username"
    },
    "role": {
        "ar": "ðŸŽ– Ø§Ù„Ø±ØªØ¨Ø©",
        "en": "ðŸŽ– Role"
    },
    "balance": {
        "ar": "ðŸ’° Ø§Ù„Ø±ØµÙŠØ¯",
        "en": "ðŸ’° Balance"
    },
    "status": {
        "ar": "ðŸ“ Ø§Ù„Ø­Ø§Ù„Ø©",
        "en": "ðŸ“ Status"
    },
    "status_active": {
        "ar": "âœ… Ù†Ø´Ø·",
        "en": "âœ… Active"
    },
    "status_blocked": {
        "ar": "ðŸš« Ù…Ø­Ø¸ÙˆØ±",
        "en": "ðŸš« Blocked"
    },
    "joined_at": {
        "ar": "ðŸ“… Ø§Ù†Ø¶Ù… ÙÙŠ",
        "en": "ðŸ“… Joined at"
    },
    "orders_count": {
        "ar": "ðŸ“¦ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª",
        "en": "ðŸ“¦ Orders Count"
    },
    
    # Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    "change_role": {
        "ar": "ðŸŽ– ØªØºÙŠÙŠØ± Ø§Ù„Ø±ØªØ¨Ø©",
        "en": "ðŸŽ– Change Role"
    },
    "edit_balance": {
        "ar": "ðŸ’° ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯",
        "en": "ðŸ’° Edit Balance"
    },
    "toggle_block": {
        "ar": "ðŸš« Ø­Ø¸Ø±/Ø¥Ù„ØºØ§Ø¡ Ø­Ø¸Ø±",
        "en": "ðŸš« Block/Unblock"
    },
    "view_orders": {
        "ar": "ðŸ“¦ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
        "en": "ðŸ“¦ User Orders"
    },
    
    # Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª
    "coupons_management": {
        "ar": "ðŸŽŸï¸ *Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª*\n\nØ§Ø®ØªØ± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡:",
        "en": "ðŸŽŸï¸ *Coupon Management*\n\nSelect action:"
    },
    "create_coupon": {
        "ar": "âž• Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¨ÙˆÙ†",
        "en": "âž• Create Coupon"
    },
    "list_coupons": {
        "ar": "ðŸ“‹ Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†Ø§Øª",
        "en": "ðŸ“‹ List Coupons"
    },
    "coupon_created": {
        "ar": "âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ø¨Ù†Ø¬Ø§Ø­!",
        "en": "âœ… Coupon created successfully!"
    },
    
    # Ø§Ù„Ø¨Ø« Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ
    "broadcast_start": {
        "ar": "ðŸ“¢ *Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø« Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ*\n\nÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙŠ ØªØ±ØºØ¨ ÙÙŠ Ø¨Ø«Ù‡Ø§ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†.",
        "en": "ðŸ“¢ *Broadcast System*\n\nPlease send the message you want to broadcast to all users."
    },
    "broadcast_confirm": {
        "ar": "âš ï¸ *Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ*\nØ³ÙŠØªÙ… Ø¨Ø« Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†Ø´ÙˆØ± Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† ÙÙŠ Ø§Ù„Ø¨ÙˆØª.",
        "en": "âš ï¸ *Are you sure?*\nThis message will be broadcast to all bot subscribers."
    },
    "broadcast_started": {
        "ar": "â³ Ø¨Ø¯Ø£ Ø§Ù„Ø¨Ø« Ù„Ù€ {count} Ù…Ø³ØªØ®Ø¯Ù…...",
        "en": "â³ Broadcasting to {count} users..."
    },
    "broadcast_complete": {
        "ar": "âœ… *Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø¨Ø« Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ*\n\nðŸ“Š Ø§Ù„ØªÙ‚Ø±ÙŠØ±:\nðŸ”¹ ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­: `{success}`\nðŸ”¸ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: `{fail}`",
        "en": "âœ… *Broadcast Complete*\n\nðŸ“Š Report:\nðŸ”¹ Successfully sent: `{success}`\nðŸ”¸ Failed: `{fail}`"
    },
    
    # Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
    "error_unauthorized": {
        "ar": "âš ï¸ ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.",
        "en": "âš ï¸ You are not authorized for this action."
    },
    "error_admin_only": {
        "ar": "âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù…ØªØ§Ø­ Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù… ÙÙ‚Ø·.",
        "en": "âš ï¸ This action is available for system admin only."
    },
    "error_invalid_input": {
        "ar": "âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ…Ø© ØµØ­ÙŠØ­Ø©.",
        "en": "âš ï¸ Please enter a valid value."
    },
    "error_user_blocked": {
        "ar": "ðŸš« Ø­Ø³Ø§Ø¨Ùƒ Ù…Ø­Ø¸ÙˆØ±.",
        "en": "ðŸš« Your account is blocked."
    },
    "error_emergency": {
        "ar": "ðŸš¨ Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ù…ØªØ¬Ø± Ù…ØªÙˆÙ‚Ù Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ø­Ø§Ù„Ø© Ø·ÙˆØ§Ø±Ø¦. Ø³Ù†Ø¹ÙˆØ¯ Ù‚Ø±ÙŠØ¨Ø§Ù‹.",
        "en": "ðŸš¨ Sorry, the store is currently stopped for emergency. We'll be back soon."
    },
    
    # Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­
    "success_updated": {
        "ar": "âœ… ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¨Ù†Ø¬Ø§Ø­!",
        "en": "âœ… Updated successfully!"
    },
    "success_blocked": {
        "ar": "âœ… ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….",
        "en": "âœ… User blocked."
    },
    "success_unblocked": {
        "ar": "âœ… ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….",
        "en": "âœ… User unblocked."
    },
    
    # Ø£Ø²Ø±Ø§Ø± Ø¹Ø§Ù…Ø©
    "btn_confirm": {
        "ar": "âœ… ØªØ£ÙƒÙŠØ¯",
        "en": "âœ… Confirm"
    },
    "btn_cancel": {
        "ar": "âŒ Ø¥Ù„ØºØ§Ø¡",
        "en": "âŒ Cancel"
    },
    "btn_confirm_buy": {
        "ar": "âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø´Ø±Ø§Ø¡",
        "en": "âœ… Confirm Purchase"
    },
    "btn_use_coupon": {
        "ar": "ðŸŽŸï¸ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙˆØ¨ÙˆÙ†",
        "en": "ðŸŽŸï¸ Use Coupon"
    },
    "btn_currency": {
        "ar": "ðŸ’µ ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø©",
        "en": "ðŸ’µ Change Currency"
    },
    "btn_back": {
        "ar": "ðŸ”™ Ø¹ÙˆØ¯Ø©",
        "en": "ðŸ”™ Back"
    },
    "btn_cancel": {
        "ar": "âŒ Ø¥Ù„ØºØ§Ø¡",
        "en": "âŒ Cancel"
    },
    "select_currency": {
        "ar": "ðŸ’µ Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„ØªÙŠ ØªÙØ¶Ù„ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø¨Ù‡Ø§:",
        "en": "ðŸ’µ Choose your preferred currency to display prices:"
    },
    "coupon_prompt": {
        "ar": "ðŸŽŸï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†:",
        "en": "ðŸŽŸï¸ Please enter the coupon code:"
    },
    "coupon_invalid": {
        "ar": "âŒ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©.",
        "en": "âŒ Invalid or expired coupon."
    },
    "coupon_applied": {
        "ar": "âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†! Ø®ØµÙ…: {discount}",
        "en": "âœ… Coupon applied! Discount: {discount}"
    },
    "min_amount_error": {
        "ar": "âš ï¸ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† ÙŠØªØ·Ù„Ø¨ Ø­Ø¯ Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø´Ø±Ø§Ø¡: {min}$",
        "en": "âš ï¸ This coupon requires a minimum purchase: {min}$"
    },
    "btn_next": {
        "ar": "â­ Ø§Ù„ØªØ§Ù„ÙŠ",
        "en": "â­ Next"
    },
    "btn_previous": {
        "ar": "â® Ø§Ù„Ø³Ø§Ø¨Ù‚",
        "en": "â® Previous"
    },
}

def get_text(key: str, lang: str = None, **kwargs) -> str:
    """
    Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Øµ Ø§Ù„Ù…ØªØ±Ø¬Ù…
    """
    if not lang:
        lang = "ar"  # Ø§Ù„Ù„ØºØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¹Ø§Ù…Ø©
    
    text = TRANSLATIONS.get(key, {}).get(lang, key)
    
    # ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†Øµ Ø¨Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
    if kwargs:
        try:
            text = text.format(**kwargs)
        except KeyError:
            pass
    
    return text

def get_user_language(user_data: dict) -> str:
    """
    Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù„ØºØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø¨ÙŠØ§Ù†Ø§ØªÙ‡
    """
    if user_data and user_data.get('language'):
        return user_data['language']
    return None  # Ø¥Ø±Ø¬Ø§Ø¹ None Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ØºØ© Ø¨Ø¹Ø¯
